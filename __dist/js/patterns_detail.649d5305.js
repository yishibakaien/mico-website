webpackJsonp([4],{18:function(e,c){},42:function(e,c,n){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}n(2),n(4),n(3),n(18),n(5);var a=n(7),r=t(a),i=n(6),o=t(i),s=n(0),l=n(1),u=(0,l.getQueryString)("dataId"),p=(0,l.getQueryString)("companyId"),d=(0,l.c)("#productNo"),m=(0,l.c)("#price"),h=(0,l.c)("#cutPrice"),y=(0,l.c)("#companyMessage"),f=(0,l.c)("#avatar"),v=(0,l.c)("#tag"),g=(0,l.c)("#viewNum"),N=(0,l.c)("#companyName"),M=(0,l.c)("#companyBusiness"),T=(0,l.c)("#category"),b=(0,l.c)("#ingredient"),H=(0,l.c)("#stock"),I=(0,l.c)("#shape"),L=(0,l.c)("#width"),k=(0,l.c)("#height"),w=(0,l.c)("#dress"),U=(0,l.c)("#call"),x=(0,l.c)("#buy"),A=(0,l.c)("#mask"),C=(0,l.c)("#colorCard"),P=(0,l.c)("#cancel"),E=(0,l.c)(".arrow")[0],S=(0,l.c)(".confirm")[0],B={colorId:"",phone:"",productId:"",purchaseNum:1,purchaseType:1,userName:""},O=(0,l.c)(".card-buy-type")[0].getElementsByClassName("value"),Q=(0,l.c)("#buyNumIpt"),_=(0,l.c)("#typePrice"),q=(0,l.c)("#cardPrice"),F=["1片","请输入大货数量","请输入剪版数量"],J=["剪小样参考价:","大货参考价:","剪版参考价:"],$=[" 免费"],j=(0,l.c)(".card-flower-color")[0].getElementsByClassName("value")[0],z=(0,l.c)(".card-flower-color")[0].getElementsByClassName("color-img"),D=(0,l.c)("#cardAvatar"),G=(0,l.c)("#userNameIpt"),K=(0,l.c)("#phoneIpt");!function(){function e(){(0,s.getColorCards)({productId:u},function(e){var c=e.data,n="",t="",a=[],i=c.length;(0,l.c)(".total-number")[0].innerHTML="/"+i;for(var s=0;s<i;s++)t+='<div class="swiper-slide" style="background-image: url('+c[s].picUrl+')" url="'+c[s].picUrl+'"></div>',n+='<img class="color-img" src="'+c[s].picUrl+'" width="36" height="36">',a.push(c[s].picUrl);(0,l.c)(".swiper-wrapper")[0].innerHTML=t,j.innerHTML=n,new r.default(".swiper-container",{spaceBetween:30,onSlideChangeEnd:function(e){(0,l.c)(".active-number")[0].innerHTML=e.activeIndex+1}});var u=document.querySelectorAll(".swiper-slide");Array.prototype.forEach.call(u,function(e){e.onclick=function(){o.default.previewImage({current:this.getAttribute("url"),urls:a})}});for(var p=0;p<z.length;p++)0===p&&(z[0].className+=" active",D.setAttribute("src",c[0].picUrl),B.colorId=c[0].id,B.productId=c[0].productId),z[p].index=p,z[p].onclick=function(){for(var e=0;e<z.length;e++)z[e].className=z[e].className.replace(" active","");this.className+=" active",D.setAttribute("src",c[this.index].picUrl),B.colorId=c[this.index].id,B.productId=c[this.index].productId};for(var d=0;d<O.length;d++)O[d].index=d,q.innerHTML=$[0],O[d].onclick=function(){for(var e=0;e<O.length;e++)O[e].className=O[e].className.replace(" active","");this.className+=" active",B.purchaseType=this.index+1,Q.value="",Q.setAttribute("placeholder",F[this.index]),"1片"===Q.getAttribute("placeholder")?(Q.value="1片",Q.readOnly=!0,B.purchaseNum=1):(Q.readOnly=!1,B.purchaseNum=""),_.innerHTML=J[this.index]+"&nbsp;&nbsp;",q.innerHTML=$[this.index]}})}function c(e){return/^1(3|4|5|7|8)[0-9]\d{8}$/.test(e||"")}function n(e){return/.{2,}/.test(e||"")}function t(e){return/\d{1,}/.test(e||"")}function a(){A.style.display="none",C.style.display="none",document.body.className=""}(0,s.getCompanyInfo)({companyId:p},function(e){var c=e.data;y.setAttribute("company-id",c.id),c.companyHeadIcon&&(f.src=c.companyHeadIcon),1===c.companyType?v.className="tag factory":2===c.companyType&&(v.className="tag stalls"),N.innerHTML=c.companyName,localStorage.companyName=c.companyName,U.setAttribute("phone",c.phone);try{M.innerHTML=c.companyExtendBO.companyBusiness}catch(e){}U.addEventListener("click",function(){var e=this.getAttribute("phone");location.href="tel:"+e}),y.onclick=function(){var e=this.getAttribute("company-id");e&&(location.href="./index.html?companyId="+e)}}),(0,s.getProduct)({id:u},function(c){var n=c.data;d.innerHTML=n.productNo,m.innerHTML=(0,l.formateMoney)(n.price,n.priceUnit),h.innerHTML=(0,l.formateMoney)(n.cutPrice,n.priceUnit),g.innerHTML=n.viewCount?n.viewCount:0,T.innerHTML=(0,l.formateSupplyType)(n.category),b.innerHTML=n.ingredient,H.innerHTML=(n.stock?n.stock:"")+" "+(0,l.formateUnit)(n.stockUnit),I.innerHTML=(0,l.formateProduceShape)(n.productShape),L.innerHTML=n.width,k.innerHTML=n.height,w.addEventListener("click",function(){location.href="./dress.html?url="+n.defaultPicUrl},!1),$.push((0,l.formateMoney)(n.price,n.priceUnit)),$.push((0,l.formateMoney)(n.cutPrice,n.priceUnit)),e()}),Q.oninput=function(){B.purchaseNum=parseFloat(this.value)},G.oninput=function(){B.userName=this.value},K.oninput=function(){B.phone=this.value},x.onclick=function(){A.style.display="block",C.style.display="block",document.body.className="modal-open"},P.onclick=a,E.onclick=a,S.onclick=function(){var e=!0,r=!0,i=!0;c(B.phone)?(K.className="",e=!0):(K.value="",K.className="invalid",e=!1),n(B.userName)?(G.className="",r=!0):(G.value="",G.className="invalid",r=!1),t(B.purchaseNum)?(Q.className="",i=!0):(Q.value="",Q.className="invalid",i=!1),e&&r&&i&&(0,s.askPurchase)(B,function(e){e.code||(alert("采购登记成功！"),a())})}}()}},[42]);